@import url('../../fonts/pixelsagas.com/PS_Okuda/font.css');

:root,
::backdrop {
    --main-font-body: "Okuda", sans-serif;
    --main-font-headers: "Okuda", sans-serif;
    --main-font-unitless: 13pt;
    --main-color-bg: hsl(210deg 20% 8%); /* dark blue-grey */
    --main-color-text: hsl(190deg 70% 85%);
    --nav-color-bg: var(--main-color-text);
    --nav-color-text: var(--main-color-bg);
    --shadow-color-text: hsl(190deg 50% 30%);
    --dialog-color-backdrop: hsl(210deg 30% 5% / 80%);
    --main-a-link-color: hsl(190deg 65% 55%);
    --main-a-hover-color: hsl(190deg 75% 65%);
    --main-a-active-color: hsl(190deg 55% 45%);
    --main-a-visited-color: hsl(200deg 50% 60%);
    --void-bg: hsl(210deg 25% 5%);
    --min-decoration-height: 0;
    --min-body-height: 100vh;
    --trek-color-1: hsl(190deg 75% 55%); /* cyan */
    --trek-color-2: hsl(200deg 70% 60%); /* light blue */
    --trek-color-3: hsl(180deg 60% 50%); /* teal */
    --trek-color-4: hsl(170deg 50% 45%); /* blue-green */
    --trek-color-5: hsl(210deg 65% 65%); /* soft blue */
    --trek-color-6: hsl(195deg 55% 50%); /* medium cyan */
    --trek-color-highlight: var(--trek-color-1);
    --player-color-red: hsl(10deg 70% 50%);
    --player-color-blue: hsl(210deg 70% 55%);
    --player-color-yellow: hsl(45deg 85% 60%);
    --player-color-brown: hsl(30deg 50% 45%);
    --player-color-black: hsl(210deg 15% 20%);
    --player-color-white: hsl(190deg 20% 80%);
    
    /* Theme-specific variables for duplicate values */
    --menu-text-bright: hsl(190deg 85% 88%);
    --menu-text-brightest: hsl(190deg 85% 90%);
    --bg-dark-1: hsl(210deg 20% 10%);
    --bg-dark-2: hsl(210deg 25% 12%);
    --bg-dark-3: hsl(210deg 30% 15%);
    --bg-darker: hsl(210deg 25% 10%);
    --bg-darkest: hsl(210deg 20% 9%);
    --glow-shadow-sm: 0 0 10px var(--trek-color-1);
    --glow-shadow-md: 0 0 15px var(--trek-color-1);
    --text-glow: 0 0 12px var(--trek-color-1);
    --border-radius-sm: 0.3em;
    --border-radius-md: 0.5em;
    --border-radius-lg: 1em;
    --gradient-bg: linear-gradient(135deg,
            hsl(210deg 25% 5%) 0%,
            hsl(210deg 20% 8%) 50%,
            hsl(210deg 25% 5%) 100%);
    --grid-bg-overlay: repeating-linear-gradient(0deg,
            transparent 0,
            transparent 1px,
            hsl(190deg 75% 55% / 3%) 1px,
            hsl(190deg 75% 55% / 3%) 2px,
            transparent 2px,
            transparent 40px),
        repeating-linear-gradient(90deg,
            transparent 0,
            transparent 1px,
            hsl(190deg 75% 55% / 3%) 1px,
            hsl(190deg 75% 55% / 3%) 2px,
            transparent 2px,
            transparent 40px);

    /* Programmable matter hexagon pattern */
    --hex-pattern-bg:
            repeating-linear-gradient(
                30deg,
                hsl(210deg 25% 12%) 0,
                hsl(210deg 25% 12%) 2px,
                hsl(210deg 20% 10%) 2px,
                hsl(210deg 20% 10%) 4px
            ),
            repeating-linear-gradient(
                150deg,
                hsl(210deg 25% 12%) 0,
                hsl(210deg 25% 12%) 2px,
                hsl(210deg 20% 10%) 2px,
                hsl(210deg 20% 10%) 4px
            ),
            repeating-linear-gradient(
                90deg,
                hsl(210deg 25% 12%) 0,
                hsl(210deg 25% 12%) 2px,
                hsl(210deg 20% 10%) 2px,
                hsl(210deg 20% 10%) 4px
            ),
            linear-gradient(135deg,
                hsl(210deg 22% 11%) 0%,
                hsl(210deg 20% 9%) 50%,
                hsl(210deg 22% 11%) 100%
            );
}

html {
    background: var(--gradient-bg);
}

body {
    padding-left: 5.5em;
    transition: background-color 2s ease-in-out 0.25s, filter 2s ease-in-out 0.25s;
    
    decoration {
        transition: filter 2s ease-in-out 0.25s;
    }

    &[alert="grey"], &[alert="cloak"] {
        filter: grayscale(0.7) brightness(0.6);
        
        decoration {
            filter: grayscale(0.8) brightness(0.5);
        }
    }
}

li[is="player-display"] {
    --pip-color: hsl(190deg 70% 70%) !important;

    button.remove {
        box-shadow: unset;
        background: unset;
    }

    select {
        box-shadow: unset;
        border: unset;
    }
}

decoration {
    z-index: -1;
    position: fixed;
    inset: 0;
    padding: 0;
    margin: 0;
    overflow: hidden;
    pointer-events: none;
    height: 0; /* Don't take up space */

    & > ul {
        margin: 0;
        padding: 0;
        list-style: none;
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        
        & li {
            position: absolute;
            
            & div {
                background: linear-gradient(90deg, 
                    transparent 0%,
                    var(--trek-color-1) 2%,
                    transparent 4%);
                opacity: 0.15;
                pointer-events: none;
            }
            
            &.left-panel div {
                /* Dark background for left padding area with programmable matter pattern */
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                width: 5em;
                background: var(--hex-pattern-bg);
                background-size: 12px 21px, 12px 21px, 12px 21px, 100% 100%;
                background-position: 0 0, 0 0, 0 0, 0 0;
                opacity: 1;
                box-shadow: inset -2px 0 10px hsl(190deg 75% 55% / 20%),
                            inset 0 0 30px hsl(210deg 30% 5% / 80%);
                border-right: 1px solid hsl(190deg 75% 55% / 30%);
            }
            
            &.top-border div {
                top: 0;
                left: 0;
                right: 0;
                height: 2px;
                box-shadow: var(--glow-shadow-sm);
            }
            
            &.bottom-border div {
                bottom: 0;
                left: 0;
                right: 0;
                height: 2px;
                box-shadow: var(--glow-shadow-sm);
            }
            
            &.left-accent div {
                top: 20%;
                left: 0;
                bottom: 20%;
                width: 1px;
                background: linear-gradient(180deg,
                    transparent 0%,
                    var(--trek-color-2) 10%,
                    var(--trek-color-1) 50%,
                    var(--trek-color-2) 90%,
                    transparent 100%);
                box-shadow: var(--glow-shadow-md);
            }
            
            &.right-accent div {
                top: 20%;
                right: 0;
                bottom: 20%;
                width: 1px;
                background: linear-gradient(180deg,
                    transparent 0%,
                    var(--trek-color-2) 10%,
                    var(--trek-color-1) 50%,
                    var(--trek-color-2) 90%,
                    transparent 100%);
                box-shadow: var(--glow-shadow-md);
            }
            
            &.corner-tl div {
                top: 0;
                left: 0;
                width: 100px;
                height: 100px;
                border-top: 2px solid var(--trek-color-1);
                border-left: 2px solid var(--trek-color-1);
                border-radius: 0 0 50%;
                background: transparent;
                box-shadow: var(--glow-shadow-md);
            }
            
            &.corner-tr {
                /* Hide upper-right corner glow */
                display: none;
            }
            
            &.corner-bl div {
                bottom: 0;
                left: 0;
                width: 100px;
                height: 100px;
                border-bottom: 2px solid var(--trek-color-1);
                border-left: 2px solid var(--trek-color-1);
                border-radius: 0 50% 0 0;
                background: transparent;
                box-shadow: var(--glow-shadow-md);
            }
            
            &.corner-br div {
                bottom: 0;
                right: 0;
                width: 100px;
                height: 100px;
                border-bottom: 2px solid var(--trek-color-1);
                border-right: 2px solid var(--trek-color-1);
                border-radius: 50% 0 0;
                background: transparent;
                box-shadow: var(--glow-shadow-md);
            }
        }
    }
}

/* Holographic effect for headers */
h1, h2, h3, h4, h5, h6, .player-image-upload input {
    text-shadow: 0 0 8px var(--trek-color-2);
    letter-spacing: 0.08em;
}

.player-image-upload input,
#alert-dropdown option {
    color: var(--menu-text-brightest) !important;
}

/* Modern button styling */
button {
    border-radius: var(--border-radius-md);
    border: 1px solid var(--trek-color-1);
    background: linear-gradient(135deg, 
        var(--bg-dark-3) 0%,
        var(--bg-dark-2) 100%);
    box-shadow: 0 0 10px hsl(190deg 75% 55% / 30%),
                inset 0 1px 0 hsl(190deg 75% 55% / 20%);
    transition: all 0.2s ease;
    
    &:hover {
        background: linear-gradient(135deg,
            hsl(210deg 30% 18%) 0%,
            hsl(210deg 25% 15%) 100%);
        box-shadow: 0 0 15px hsl(190deg 75% 55% / 50%),
                    inset 0 1px 0 hsl(190deg 75% 55% / 30%);
        border-color: var(--trek-color-2);
    }
    
    &:active {
        background: linear-gradient(135deg,
            var(--bg-darker) 0%,
            var(--main-color-bg) 100%);
        box-shadow: 0 0 5px hsl(190deg 75% 55% / 40%),
                    inset 0 -1px 0 hsl(190deg 75% 55% / 20%);
    }
}

/* Modern input styling */
input, select {
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--trek-color-3);
    background: var(--bg-dark-1);
    box-shadow: inset 0 1px 3px hsl(0deg 0% 0% / 50%);
    
    &:focus {
        outline: none;
        border-color: var(--trek-color-1);
        box-shadow: 0 0 10px hsl(190deg 75% 55% / 40%),
                    inset 0 1px 3px hsl(0deg 0% 0% / 50%);
    }
}

/* Subtle grid effect */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: var(--grid-bg-overlay);
    pointer-events: none;
    z-index: -1;
}

/* Enhanced visibility for specific UI elements */
#game-name {
    text-align: center;
    width: calc(var(--main-font-size) * 5);
    color: var(--menu-text-brightest) !important;
    text-shadow: 0 0 15px var(--trek-color-1),
                 0 0 25px var(--trek-color-2);
}

#settings-btn,
#save-btn,
#dice-btn,
#font-up-btn,
#font-down-btn {
    color: var(--menu-text-bright) !important;

    & text,
    & symbol {
        text-shadow: var(--text-glow);
    }
}

#font-up-btn {
    top: calc(var(--main-font-size)* 7.8);
}

#font-down-btn {
    top: calc(var(--main-font-size)* 9);
}

#dice-btn {
    top: calc(var(--main-font-size)* 10.3);
    filter: sepia(1) saturate(3) hue-rotate(150deg);

    &:hover, &:focus {
      & img.symbol {
        filter: sepia(1) saturate(1) hue-rotate(150deg);
      }
    }
    &:active {
      & img.symbol {
        filter: sepia(1) brightness(0.5) hue-rotate(150deg);
      }
    }
}

/* Move fullscreen button to bottom left and make it bigger */
#fullscreen-btn {
    filter: brightness(1.8) drop-shadow(0 0 8px var(--trek-color-1));
    top: auto !important;
    bottom: 1em;
    width: 4em !important;
    height: 3em;
    display: flex;
    align-items: center;
    justify-content: center;

    & img.symbol {
        width: 2em;
        height: 2em;
    }
}

/* Adjust menu items to better fit the 7em left panel space */
#settings-btn,
#save-btn,
#font-up-btn,
#font-down-btn,
#dice-btn,
#momentum-section,
#threat-section {
    left: 0.3em !important;
    width: 5em !important;
    padding: 0 0.3em !important;
    justify-content: space-evenly;
}

#momentum-section label,
#threat-section label {
    color: var(--menu-text-bright) !important;
    text-shadow: var(--glow-shadow-sm);
}

/* Move momentum and threat pools closer to bottom, above fullscreen button */
#momentum-section {
    top: auto !important;
    bottom: 8em;
}

#threat-section {
    top: auto !important;
    bottom: 4.5em;
}


/* Ensure theme element doesn't take up space */
theme {
    display: block;
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    height: 0;
    overflow: visible;
}

body > header {
    border-radius: 1em;
    border: 2px solid var(--trek-color-highlight);
    box-shadow: var(--text-glow);

    & #ship-enter-fullscreen {
        right: 6px;
        bottom: 6px;
    }
}

/* Fix body main grid positioning */
body > main {
    grid-row: 2 / 4;
}

dialogs > dialog {
    color: white;
    box-shadow: 0 0 30px hsl(190deg 75% 55% / 40%),
                inset 0 0 20px hsl(190deg 75% 55% / 10%) !important;

    &[is="settings-dialog"] {
        max-width: 30em;
    }

    & > header, & > footer {
        background: var(--hex-pattern-bg);
        background-size: 12px 21px, 12px 21px, 12px 21px, 100% 100%;
        background-position: 0 0, 0 0, 0 0, 0 0;
        color: black;
        font-weight: bold;

        & button.close {
            border-radius: unset;
        }
    }

    & > header {
        color: var(--main-color-text);
    }

    & > footer {
        padding: 0.5em 0;

        & button.close {
            padding: 0.25em 2.25em;
        }
    }

    & > main {
        background: var(--gradient-bg);
        color: var(--main-color-text);
        font-size: calc(var(--main-font-size) * 1.2);

        & hr {
            border-color: var(--trek-color-highlight);
        }

        & dt {
            font-weight: bold;
        }

        & button,
        & select,
        & input[type="file"] {
            background-color: var(--trek-color-1);
            color: var(--main-color-text);
            border: 1px solid var(--trek-color-1);
            border-radius: 0.5em 0 0 0.5em;
            padding: 0.25em 0.5em;

            &:hover {
                box-shadow: 0 0 15px hsl(190deg 75% 55% / 50%);
                border-color: var(--trek-color-2);
            }

            &:focus {
                box-shadow: 0 0 15px hsl(190deg 75% 55%);
            }
        }

        & select,
        & input[type="file"] {
            background: var(--bg-dark-1);
            border-radius: 0.5em 0 0 0.5em;
            color: var(--main-color-text);
            padding: 0.3em 0.5em;
            margin-bottom: 0.5em;

            &:focus {
                outline: none;
                border-color: var(--trek-color-5);
                box-shadow: 0 0 10px hsl(190deg 75% 55% / 40%);
            }
        }
    }
}
